@{
    ViewData["Title"] = "Chat Room";
}

<div class="chat-container">
    <!-- Room Header -->
    <div class="room-header bg-primary text-white p-3">
        <div class="row align-items-center">
            <div class="col-md-4">
                <h5 class="mb-0">
                    <i class="fas fa-comments me-2"></i>
                    Room: <span id="roomCodeDisplay">----</span>
                </h5>
            </div>
            <div class="col-md-4 text-center">
                <div id="countdown" class="countdown">
                    <i class="fas fa-clock me-1"></i>
                    <span id="timeRemaining">--:--:--</span>
                </div>
            </div>
            <div class="col-md-4 text-end">
                <span id="participantInfo" class="me-3">
                    <i class="fas fa-users me-1"></i>
                    <span id="participantCount">0</span>/<span id="maxParticipants">20</span>
                </span>
                <button id="leaveRoomBtn" class="btn btn-outline-light btn-sm">
                    <i class="fas fa-sign-out-alt me-1"></i>Leave
                </button>
            </div>
        </div>
    </div>

    <!-- Chat Messages Area -->
    <div class="chat-messages" id="chatMessages">
        <div class="text-center p-4 text-muted">
            <i class="fas fa-comments fa-2x mb-2"></i>
            <p>Welcome to the chat room! Start the conversation...</p>
        </div>
    </div>

    <!-- Message Input -->
    <div class="message-input-area">
        <div class="container-fluid p-3 bg-light border-top">
            <div class="input-group">
                <input type="text" id="messageInput" class="form-control" placeholder="Type your message..." maxlength="1000" disabled>
                <button id="sendMessageBtn" class="btn btn-primary" type="button" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Participants Panel (Collapsible) -->
<div class="participants-panel">
    <button class="btn btn-info btn-sm participants-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#participantsList">
        <i class="fas fa-users"></i>
    </button>
    <div class="collapse" id="participantsList">
        <div class="card card-body">
            <h6 class="mb-2">Participants</h6>
            <div id="participantsContainer">
                <!-- Participants will be populated by JavaScript -->
            </div>
        </div>
    </div>
</div>

<!-- Connection Status -->
<div id="connectionStatus" class="connection-status d-none">
    <div class="alert alert-warning mb-0">
        <i class="fas fa-exclamation-triangle me-2"></i>
        <span id="connectionMessage">Connecting...</span>
    </div>
</div>

<!-- Notification Toast -->
<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="notificationToast" class="toast" role="alert">
        <div class="toast-header">
            <i class="fas fa-bell text-primary me-2"></i>
            <strong class="me-auto">Notification</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
        </div>
        <div class="toast-body" id="notificationBody">
            <!-- Notification content will be set by JavaScript -->
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/chat.js"></script>
}